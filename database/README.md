# データベース設定ガイド

## Supabaseでの実行手順

### 1. テーブル作成
以下の順番でSQLを実行してください：

1. **商品マスタテーブル作成**
```sql
-- create_products_table.sql の内容を実行
```

2. **代理店テーブルの更新**
```sql
-- alter_agencies_table.sql の内容を実行
```

3. **報酬設定テーブル作成**
```sql
-- create_commission_settings_table.sql の内容を実行
```

### 2. テストデータ投入
```sql
-- insert_test_agencies.sql の内容を実行
```

## テスト代理店の構造

作成される7つの代理店：

### 縦系列（4階層）
```
株式会社アルファ商事 (Tier1: AGN20240001)
└── 株式会社ベータシステム (Tier2: AGN20240002)
    └── ガンマコンサルティング (Tier3: AGN20240003)
        └── デルタマーケティング (Tier4: AGN20240004)
```

### 横展開系列（1階層に複数配下）
```
株式会社イプシロン (Tier1: AGN20240005)
├── 株式会社ゼータテック (Tier2: AGN20240006) [active]
└── イータソリューションズ (Tier2: AGN20240007) [pending]
```

## 各代理店の特徴

| 代理店名 | Tier | 会社型 | インボイス | 源泉徴収 | ステータス |
|---------|------|--------|-----------|----------|-----------|
| アルファ商事 | 1 | 法人 | 登録済 | なし | active |
| ベータシステム | 2 | 法人 | 登録済 | なし | active |
| ガンマコンサルティング | 3 | 個人 | 未登録 | あり | active |
| デルタマーケティング | 4 | 個人 | 未登録 | あり | active |
| イプシロン | 1 | 法人 | 登録済 | なし | active |
| ゼータテック | 2 | 法人 | 登録済 | なし | active |
| イータソリューションズ | 2 | 個人 | 未登録 | あり | pending |

## 注意事項
- 本番環境では実行しないでください
- UUIDは固定値を使用しています（テスト環境での参照を容易にするため）
- agency_codeは AGN2024XXXX 形式で統一